"use strict";if("undefined"==typeof dragula){var dragula;throw"Exception: dragula.js is undefined. Please add the library as a dependency to your project"}angular.module("tagsCategorizer",[]),angular.module("tagsCategorizer").directive("tagsCategorizer",["$parse","$document","$http","$timeout","$compile","$templateCache",function(a,b,c,d,e,f){return{restrict:"E",scope:{tagsGroups:"=tagsGroups",ungroupedTags:"=ungroupedTags",addGroup:"&addGroup",updateGroup:"&updateGroup",deleteGroup:"&deleteGroup"},templateUrl:"angular-tagscategorizer.html",controller:["$scope",function(a){a.newGroup="",a.renameGroup=[],a.addNewGroup=function(){a.newGroup.length>3&&(a.tagsGroups.unshift({name:a.newGroup,tags:[],"short":a.newGroup.toLowerCase()}),a.newGroup="",a.addGroup(a.newGroup))},a.checkAddNew=function(b){13==b.keyCode&&a.addNewGroup()},a.editGroup=function(b,c){b.preventDefault(),b.stopPropagation(),a.renameGroup[c]&&a.updateGroup(a.tagsGroups[c]),a.renameGroup[c]=!a.renameGroup[c]},a.stopEvent=function(a){a.stopPropagation(),a.preventDefault()},a.deleteTagGroup=function(b,c){console.log(a.tagsGroups),a.ungroupedTags=a.ungroupedTags.concat(a.tagsGroups[c].tags),a.tagsGroups.splice(c,1),a.deleteGroup(a.tagsGroups[c])},a.makeVisible=function(b){return a.renameGroup.indexOf(!0)>-1?!1:(a.tagsGroups.forEach(function(a){a.open=!1}),void(a.tagsGroups[b].open=!0))},a.removeAssignedTag=function(b,c){a.ungroupedTags.push(b[c]),b.splice(c,1),a.updateGroup(a.tagsGroups[c])},a.addTagToGroup=function(b){a.tagsGroups.forEach(function(c,d){c.open&&(c.tags.push(a.ungroupedTags[b]),a.ungroupedTags.splice(b,1),a.updateGroup(a.tagsGroups[d]))})}}],link:function(a,b,c){}}}]),angular.module("tagsCategorizer").run(["$templateCache",function(a){a.put("angular-tagscategorizer.html",'<div class="ar-tags-categorizer">\n    <div class="row">\n\n        <div class="groups-list col-md-6">\n\n            <div class="add-group">\n\n                <input type="text" ng-model="newGroup" placeholder="Add new group" ng-keypress="checkAddNew($event)">\n                <button ng-click="addNewGroup()"><i class="fa fa-plus"></i></button>\n            </div>\n\n            <div class="bags" ng-init="makeVisible(0)">\n                <div class="bag clearfix"\n                     ng-repeat="group in tagsGroups track by $index"\n                     ng-click="makeVisible($index)"\n                     data-gid="{{group.id}}">\n                    <div class="title clearfix"\n                         ng-class="{\'editing\': renameGroup[$index]}">\n\n                        <span ng-if="!renameGroup[$index]">{{group.name}}</span>\n                        <input type="text" class="rename" ng-model="group.name" ng-click="stopEvent($event)" ng-if="renameGroup[$index] && group.open">\n                        <div class="pull-right">\n                            <span class="edit-group" ng-if="group.open" ng-click="editGroup($event, $index)"><i class="fa fa-pencil-square-o"></i></span>\n                            <span class="remove-group" ng-if="group.open" ng-click="deleteTagGroup($event, $index)"><i class="fa fa-times"></i></span>\n                            <button type="button" class="btn btn-info nr-tags">{{group.tags.length}} <i class="fa fa-tags"></i></button>\n                            <i class="arrow glyphicon" ng-class="{\'glyphicon-chevron-down\': group.open, \'glyphicon-chevron-right\': !group.open}"></i>\n                        </div>\n\n                    </div>\n\n                    <div class="tags clearfix"\n                         ng-show="group.open">\n\n                          <span class="tag" ng-repeat="tag in group.tags track by $index" data-tag="{{tag}}">\n                            <i class="fa fa-tag"></i> {{tag}} <i ng-click="removeAssignedTag(group.tags, $index)" class="glyphicon glyphicon-remove"></i>\n                          </span>\n                    </div>\n\n                </div>\n            </div>\n\n        </div>\n\n        <div class="ungrouped-tags col-md-6">\n        <span class="unsel-tag" ng-repeat="tag in ungroupedTags track by $index" data-tag="{{tag}}" ng-click="addTagToGroup($index)">\n            <i class="fa fa-tag"></i> {{tag}} <i ng-click="removeAssignedTag(group.tags, $index)" class="glyphicon glyphicon-remove"></i>\n        </span>\n        </div>\n\n    </div>\n</div>')}]);